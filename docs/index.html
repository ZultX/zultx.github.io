<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZultX AI ‚Äî Fast Experimental Intelligence</title>
<meta name="description" content="ZultX is an experimental, positive AI system focused on fast reasoning, clean UI, and intelligent conversation." />
<meta name="robots" content="index, follow" />
<meta name="google-site-verification" content="ZPjCIwA1WKlXdH9n68BLts7CbCRwKlmwgymRsyWMawU" />
<link rel="canonical" href="https://ZultX.github.io/zultx/" />
  
<style>
:root{
  --bg:#0b0b0f;--muted:#9aa0a6;--text:#e8eaed;--accent:#18d018;--outline:#1a1a1a;
  --side-w:320px;--header-h:72px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;color:var(--text);background:var(--bg)}
header{position:sticky;top:0;height:var(--header-h);display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#fff;color:#050505;border-bottom:1px solid var(--outline)}
.logo{font-weight:900;display:flex;align-items:center;gap:8px}
.logo .fire{background:linear-gradient(90deg,#ff3b3b,#ff8a00);-webkit-background-clip:text;background-clip:text;color:transparent;font-weight:900}
.logo .x-black{background:#000;color:#fff;padding:4px 8px;border-radius:6px}
.top-tip{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;background:linear-gradient(#fff,#f7f7f7);cursor:pointer}
.app{display:flex;min-height:100vh;position:relative}
.side{width:var(--side-w);background:linear-gradient(180deg,#08090a,#0b0b0b);border-right:1px solid var(--outline);padding:12px;overflow:auto}
.menu-btn{display:flex;align-items:center;gap:8px;padding:10px;border-radius:10px;cursor:pointer}
.main{flex:1;display:flex;flex-direction:column;position:relative}
.center-screen{flex:1;display:flex;align-items:center;justify-content:center;color:var(--muted)}
.chat-wrap{display:flex;flex-direction:column;gap:12px;padding:18px;max-width:900px;margin:0 auto;flex:1;overflow:auto}
.msg{padding:12px 14px;border-radius:12px;max-width:78%;white-space:pre-wrap}
.msg.user{background:#071326;margin-left:auto;border-top-right-radius:2px;color:#bfe}
.msg.ai{background:linear-gradient(180deg,#0f1720,#07101a);margin-right:auto;border-top-left-radius:2px}
.compose{padding:12px;border-top:1px solid var(--outline);display:flex;gap:8px;align-items:center;background:linear-gradient(180deg,#020203,#0b0b0b)}
.compose textarea{flex:1;background:transparent;border:1px solid rgba(255,255,255,0.04);padding:12px;border-radius:12px;color:var(--text);min-height:46px;resize:none}
.compose button{background:var(--accent);border:none;padding:10px 16px;border-radius:10px;font-weight:700;cursor:pointer;color:#000}
.hint{color:var(--muted);font-size:13px;text-align:center;margin-top:8px}
.history-item{padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.02);cursor:pointer;margin-bottom:8px}
.small-muted{font-size:12px;color:var(--muted)}
.modal{display:none;position:fixed;left:8%;top:12%;right:8%;bottom:12%;background:#061212;border-radius:12px;padding:18px;z-index:10030;overflow:auto;border:1px solid #142}
@media (max-width:880px){ .side{display:none} }
</style>
</head>
<body>
<header>
  <div style="display:flex;gap:10px;align-items:center">
    <div class="logo"><span class="fire">Zult</span><span class="x-black">X</span></div>
  </div>
  <div class="top-tip" id="topTipBtn"><span>üçè</span><strong> Tip</strong></div>
  <div style="display:flex;gap:10px;align-items:center">
    <button id="lettersBtn" style="background:transparent;border:0;cursor:pointer">‚úâÔ∏è Letters</button>
    <div class="small-muted">v1.1/Friendly</div>
  </div>
</header>

<div class="app">
  <aside class="side">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div><strong>ZultX</strong><small class="small-muted"> v1.1</small></div>
      <div class="small-muted">USER</div>
    </div>

    <h3>Your Chats</h3>
    <div id="historyList"></div>
    <div style="height:12px"></div>
    <div class="menu-btn" id="newChatBtn">+ New chat</div>
    <div style="height:20px"></div>
    <div class="hint">Local-only lite history (saved in browser)</div>
  </aside>

  <main class="main">
    <div id="centerScreen" class="center-screen">
      <div style="text-align:center;max-width:720px">
        <div style="font-size:28px;font-weight:800;margin-bottom:16px;color:#fff">What ZultX can help?</div>
        <button id="startBtn" style="padding:12px 18px;border-radius:999px;border:1px solid var(--outline);background:transparent;color:var(--text);cursor:pointer">Ask ZultX Something New..</button>
      </div>
    </div>

    <div id="chatArea" class="chat-wrap" style="display:none"></div>

    <div class="compose">
      <textarea id="input" placeholder="Ask ZultX Positive.." rows="1"></textarea>
      <button id="sendBtn">Send</button>
    </div>
  </main>
</div>

<!-- Letters modal -->
<div id="lettersModal" class="modal">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <h2>Letters</h2>
    <button id="closeLettersBtn">Close</button>
  </div>
  <pre id="modalLettersContent" style="white-space:pre-wrap;color:var(--text);margin-top:12px"></pre>
</div>

<!-- Tip modal -->
<div id="tipModal" class="modal" style="width:420px;left:calc(50% - 210px);right:auto">
  <h3>Tip ZultX</h3>
  <div style="display:flex;gap:8px;margin-top:12px">
    <button onclick="createTip(10)">‚Çπ10</button>
    <button onclick="createTip(40)">‚Çπ40</button>
    <button onclick="createTip(100)">‚Çπ100</button>
    <button onclick="createTip(500)">‚Çπ500</button>
  </div>
  <div style="margin-top:12px"><button id="closeTipBtn">Cancel</button></div>
</div>

<!-- QR modal -->
<div id="qrModal" class="modal" style="width:420px;left:calc(50% - 210px);right:auto;text-align:center">
  <h3>Scan to pay (UPI)</h3>
  <div id="qrImgWrap" style="margin-top:12px"></div>
  <div style="margin-top:12px"><button id="copyUpiBtn">Copy UPI</button><button id="closeQrBtn">Close</button></div>
</div>

<script>
/* ----------------- STATE ----------------- */
  /* ----------------- CONFIG ----------------- */
const API_BASE = "https://zultx.up.railway.app";
const chatArea = document.getElementById("chatArea");
const input = document.getElementById("input");
const sendBtn = document.getElementById("sendBtn");
const startBtn = document.getElementById("startBtn");
const centerScreen = document.getElementById("centerScreen");
const historyList = document.getElementById("historyList");
const newChatBtn = document.getElementById("newChatBtn");

const lettersBtn = document.getElementById("lettersBtn");
const lettersModal = document.getElementById("lettersModal");
const modalLettersContent = document.getElementById("modalLettersContent");
const closeLettersBtn = document.getElementById("closeLettersBtn");

const topTipBtn = document.getElementById("topTipBtn");
const tipModal = document.getElementById("tipModal");
const closeTipBtn = document.getElementById("closeTipBtn");
const qrModal = document.getElementById("qrModal");
const qrImgWrap = document.getElementById("qrImgWrap");
const closeQrBtn = document.getElementById("closeQrBtn");
const copyUpiBtn = document.getElementById("copyUpiBtn");

let currentConversationId = null;

/* ----------------- HISTORY ----------------- */
function makeConvoId(){ return 'convo_' + Date.now(); }
function refreshHistoryList(){
  const key = 'zultx_history';
  const all = JSON.parse(localStorage.getItem(key) || '{}');
  const keys = Object.keys(all).sort((a,b)=> all[b].created - all[a].created);
  historyList.innerHTML = '';
  for(const k of keys){
    const item = all[k];
    const el = document.createElement('div');
    el.className = 'history-item';
    const last = (item.messages && item.messages[item.messages.length-1]) || null;
    el.innerHTML = `<div style="font-weight:700">${item.id}</div><div class="small-muted">${last? last.text.slice(0,48) : 'New chat'}</div>`;
    el.onclick = ()=> openConversation(k);
    historyList.appendChild(el);
  }
}
function saveMessageToHistory(convoId, role, text){
  const key = 'zultx_history';
  const all = JSON.parse(localStorage.getItem(key) || '{}');
  all[convoId] = all[convoId] || { id: convoId, created: Date.now(), messages: [] };
  all[convoId].messages.push({ role, text, t: Date.now() });
  localStorage.setItem(key, JSON.stringify(all));
  refreshHistoryList();
}
function loadConversation(convoId){
  const all = JSON.parse(localStorage.getItem('zultx_history') || '{}');
  return all[convoId] || null;
}
function localSaveInit(convoId){
  const all = JSON.parse(localStorage.getItem('zultx_history') || '{}');
  if(!all[convoId]) all[convoId] = { id: convoId, created: Date.now(), messages: [] };
  localStorage.setItem('zultx_history', JSON.stringify(all));
}

/* ----------------- UI helpers ----------------- */
function addBubble(kind, text){
  const d = document.createElement('div');
  d.className = 'msg ' + (kind === 'user' ? 'user' : 'ai');
  d.textContent = text;
  chatArea.appendChild(d);
  chatArea.scrollTop = chatArea.scrollHeight;
  return d;
}
function addUserMsg(text){ addBubble('user', text); saveMessageToHistory(currentConversationId, 'user', text); }
function addAiMsg(text){ addBubble('ai', text); saveMessageToHistory(currentConversationId, 'ai', text); }
function addSystemMsg(text){
  const d = document.createElement('div'); d.style.textAlign='center'; d.style.color='#9aa0a6'; d.textContent = text; chatArea.appendChild(d); chatArea.scrollTop = chatArea.scrollHeight;
}

/* ----------------- Send message (NO STREAM) ----------------- */
async function sendMessage(){
  const text = input.value.trim();
  if(!text) return;

  // ensure chat visible
  centerScreen.style.display = 'none';
  chatArea.style.display = 'flex';

  addUserMsg(text);
  input.value = '';
  sendBtn.disabled = true;

  // insert temporary AI bubble
  const aiDiv = addBubble('ai', 'ZultX is thinking deep.. (For Deeper, Better, User friendly)');

  try{
    // call non-stream endpoint; always returns JSON { answer: "..." }
    const res = await fetch(
  `${API_BASE}/ask?q=${encodeURIComponent(text)}`,
  {
    headers: { "Accept": "application/json" },
    method: "GET"
  }
);

    if(!res.ok){
      aiDiv.textContent = "‚ö†Ô∏è Server error ‚Äî Make Sure Connection Working.";
      saveMessageToHistory(currentConversationId, 'ai', aiDiv.textContent);
      return;
    }

    const data = await res.json();
    const ans = (data && data.answer) ? data.answer : "I cannot compute it safely. Is there is anything other i can help with?";
    aiDiv.textContent = ans;
    // already saved ai bubble in addBubble? We used addBubble earlier and saved. But ensure history saved:
    // replace last saved AI (addBubble already saved via addAiMsg?) - we used addBubble directly, so save now:
    saveMessageToHistory(currentConversationId, 'ai', ans);

  } catch(err){
    console.error(err);
    aiDiv.textContent = "‚ö†Ô∏è Connection failed.";
    saveMessageToHistory(currentConversationId, 'ai', aiDiv.textContent);
  } finally {
    sendBtn.disabled = false;
    refreshHistoryList();
  }
}

/* ----- bindings ----- */
sendBtn.addEventListener('click', sendMessage);
input.addEventListener('keydown', e => { if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); sendMessage(); } });

startBtn.addEventListener('click', () => {
  currentConversationId = makeConvoId();
  localSaveInit(currentConversationId);
  chatArea.innerHTML = '';
  centerScreen.style.display = 'none';
  chatArea.style.display = 'flex';
  addSystemMsg('New chat started.');
  refreshHistoryList();
});

newChatBtn.addEventListener('click', () => {
  currentConversationId = makeConvoId();
  localSaveInit(currentConversationId);
  chatArea.innerHTML = '';
  centerScreen.style.display = 'none';
  chatArea.style.display = 'flex';
  addSystemMsg('New chat started.');
  refreshHistoryList();
});

function openConversation(convoId){
  currentConversationId = convoId;
  const convo = loadConversation(convoId);
  chatArea.innerHTML = '';
  centerScreen.style.display = 'none';
  chatArea.style.display = 'flex';
  if(convo && convo.messages){
    for(const m of convo.messages){
      addBubble(m.role === 'user' ? 'user' : 'ai', m.text);
    }
  }
}

/* ----------------- Letters / Tips UI ----------------- */
lettersBtn.addEventListener('click', async ()=>{
  try{
    const res = await fetch(`${API_BASE}/letters`);
    if(!res.ok) return alert('No letters');
    const data = await res.json();
    const name = (data.letters && data.letters.length) ? data.letters[0] : null;
    if(!name) { modalLettersContent.textContent = 'No letters found'; lettersModal.style.display='block'; return; }
    const r2 = await fetch(`${API_BASE}/letters/` + encodeURIComponent(name));
    const text = await r2.text();
    modalLettersContent.textContent = text;
    lettersModal.style.display = 'block';
  }catch(e){ alert('Unable to load letters'); }
});
closeLettersBtn.addEventListener('click', ()=> lettersModal.style.display='none');

topTipBtn.addEventListener('click', ()=> tipModal.style.display='block');
closeTipBtn.addEventListener('click', ()=> tipModal.style.display='none');

async function createTip(amount){
  try{
    const res = await fetch(
  `${API_BASE}/tip`,
  {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({amount})
  }
);
    const data = await res.json();
    if(!data.ok) return alert('Tip failed');
    const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    if(isMobile){
      window.location.href = data.upi_link;
    } else {
      qrImgWrap.innerHTML = `<img src="${data.qr}" style="width:280px;height:280px;border-radius:8px" />`;
      qrModal.style.display = 'block';
    }
  }catch(e){ alert('Tip failed'); }
}
closeQrBtn.addEventListener('click', ()=> qrModal.style.display='none');
copyUpiBtn.addEventListener('click', async ()=>{
  try{
    const res = await fetch('${API_BASE}/tip', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({amount:10}) });
    const data = await res.json();
    if(data && data.upi_link){
      await navigator.clipboard.writeText(data.upi_link);
      copyUpiBtn.textContent = 'Copied ‚úì';
    }
  }catch(e){ alert('Copy failed'); }
});

/* init */
if(!currentConversationId){
  currentConversationId = makeConvoId();
  localSaveInit(currentConversationId);
}
refreshHistoryList();
</script>
</body>
  </html>
